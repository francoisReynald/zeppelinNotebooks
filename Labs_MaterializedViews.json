{"paragraphs":[{"text":"%md\n# About\n**Lab:** Materialized Views\n**Objective:** Become familiar with using Hive views and Hive Materialized views\n**File locations:** /labs/data/\n**Successful outcome:** Understanding Hive materialized views\n**Before you begin:** N/A\n**Related lessons:** Advanced Hive Programming \n\n---","user":"admin","dateUpdated":"2019-06-06T12:58:27+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>About</h1>\n<p><strong>Lab:</strong> Materialized Views\n<br  /><strong>Objective:</strong> Become familiar with using Hive views and Hive Materialized views\n<br  /><strong>File locations:</strong> /labs/data/\n<br  /><strong>Successful outcome:</strong> Understanding Hive materialized views\n<br  /><strong>Before you begin:</strong> N/A\n<br  /><strong>Related lessons:</strong> Advanced Hive Programming</p>\n<hr />\n"}]},"apps":[],"jobName":"paragraph_1559825907084_354339580","id":"20181126-092644_1457476546","dateCreated":"2019-06-06T12:58:27+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:5453"},{"text":"%md\n# Setup","user":"admin","dateUpdated":"2019-06-06T13:01:00+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>Setup</h1>\n"}]},"apps":[],"jobName":"paragraph_1559825907085_-1138977458","id":"20181201-044336_178705192","dateCreated":"2019-06-06T12:58:27+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:5454","dateFinished":"2019-06-06T13:01:00+0000","dateStarted":"2019-06-06T13:01:00+0000"},{"text":"%sh\nhdfs dfs -chmod -R 777 /user/zeppelin\n\nhdfs dfs -rm /labs/data/title.basics.tsv\nhdfs dfs -put /opt/labs/data/title.basics.tsv /labs/data/\nhdfs dfs -rm /labs/data/title.crew.tsv\nhdfs dfs -put /opt/labs/data/title.crew.tsv /labs/data/\nhdfs dfs -rm /labs/data/name.basics.tsv\nhdfs dfs -put /opt/labs/data/name.basics.tsv /labs/data/\nhdfs dfs -rm /labs/data/title.ratings.tsv\nhdfs dfs -put /opt/labs/data/title.ratings.tsv /labs/data/","user":"admin","dateUpdated":"2019-06-06T12:59:47+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"editorMode":"ace/mode/sh","title":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1559825957586_1668220511","id":"20190606-125917_882022294","dateCreated":"2019-06-06T12:59:17+0000","status":"READY","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:9802","title":"Copy the data in HDFS"},{"text":"%jdbc(hive_interactive)\n\ndrop database if exists movies cascade;\n\ncreate database movies;\nuse movies;\n\n-- Contains the following information for titles\nCREATE EXTERNAL TABLE movie_title (\n                        tconst string,\n                        titleType string,\n                        primaryTitle string,\n                        originalTitle string,\n                        isAdult string,\n                        startYear string,\n                        endYear string,\n                        runtimeMinutes string,\n                        genres ARRAY<STRING>\n                        ) ROW FORMAT DELIMITED\nFIELDS TERMINATED BY '\\t' LOCATION '/user/zeppelin/movie_title/';\n\n-- Load data\nLOAD DATA  INPATH '/labs/data/title.basics.tsv' OVERWRITE INTO TABLE movie_title;\n\n-- Remove header for movie_title\nALTER TABLE movie_title SET TBLPROPERTIES (\"skip.header.line.count\"=\"1\");\n\n\n-- Contains the information for directors and writers\nCREATE EXTERNAL TABLE movie_crew(\n                        tconst string,\n                        directors ARRAY<STRING>,\n                        writers ARRAY<STRING>\n                        ) ROW FORMAT DELIMITED\nFIELDS TERMINATED BY '\\t' LOCATION '/user/zeppelin/movie_crew/';\n\n-- Load data movie_crew\nLOAD DATA  INPATH '/labs/data/title.crew.tsv' OVERWRITE INTO TABLE movie_crew;\n\n-- Remove header for movie_crew\nALTER TABLE movie_crew SET TBLPROPERTIES (\"skip.header.line.count\"=\"1\");\n\n-- Contains the information for names\nCREATE EXTERNAL TABLE movie_crew_info(\n                        nconst string,\n                        primaryName string,\n                        birthYear string,\n                        deathYear string,\n                        primaryProfession ARRAY<STRING>,\n                        knownForTitles ARRAY<STRING>\n                        ) ROW FORMAT DELIMITED\nFIELDS TERMINATED BY '\\t' LOCATION '/user/zeppelin/movie_crew_info/';\n\n-- Load data movie_crew_info\nLOAD DATA  INPATH '/labs/data/name.basics.tsv' OVERWRITE INTO TABLE movie_crew_info;\n\n-- Remove header for movie_crew_info\nALTER TABLE movie_crew_info SET TBLPROPERTIES (\"skip.header.line.count\"=\"1\");\n\n\n-- Ratings and vote information for titles\nCREATE EXTERNAL TABLE ratings(\n                        tconst string,\n                        averageRting double,\n                        numVotes int\n                        ) ROW FORMAT DELIMITED\nFIELDS TERMINATED BY '\\t' LOCATION '/user/zeppelin/ratings/';\n\n\n-- Load data ratings\nLOAD DATA  INPATH '/labs/data/title.ratings.tsv' OVERWRITE INTO TABLE ratings;\n\n-- Remove header for ratings\nALTER TABLE ratings SET TBLPROPERTIES (\"skip.header.line.count\"=\"1\");","user":"admin","dateUpdated":"2019-06-06T13:00:37+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"sql","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"editorMode":"ace/mode/sql","title":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1559826018457_1370149049","id":"20190606-130018_345497420","dateCreated":"2019-06-06T13:00:18+0000","status":"READY","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:9880","title":"Create the movies database"},{"text":"%md\n# Lab\n","user":"admin","dateUpdated":"2019-06-06T12:58:27+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>Lab</h1>\n"}]},"apps":[],"jobName":"paragraph_1559825907086_-1095611962","id":"20181126-093358_358613711","dateCreated":"2019-06-06T12:58:27+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5455"},{"text":"%md\nWe are going to use the new movie database and do a describe on the tables listed  below\n\n~~~\nuse movies;\ndescribe movie_title;\ndescribe movie_crew;\ndescribe movie_crew_info;\ndescribe ratings;\n~~~\n\nAlso, try some queries on the tables for practice. Limit your data to 5 rows.","user":"admin","dateUpdated":"2019-06-06T12:58:27+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>We are going to use the new movie database and do a describe on the tables listed  below</p>\n<pre><code>use movies;\ndescribe movie_title;\ndescribe movie_crew;\ndescribe movie_crew_info;\ndescribe ratings;\n</code></pre>\n<p>Also, try some queries on the tables for practice. Limit your data to 5 rows.</p>\n"}]},"apps":[],"jobName":"paragraph_1559825907086_-720702074","id":"20181201-173003_1022275665","dateCreated":"2019-06-06T12:58:27+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5457"},{"title":"1 - Use movies database and describe tables","text":"","user":"admin","dateUpdated":"2019-06-06T12:58:27+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"title":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"col_name":"string","data_type":"string","comment":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}},"1":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"col_name":"string","data_type":"string","comment":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}},"2":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"col_name":"string","data_type":"string","comment":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}},"3":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"col_name":"string","data_type":"string","comment":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1559825907087_-1715161485","id":"20181126-094403_539011278","dateCreated":"2019-06-06T12:58:27+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5458"},{"title":"2 - Do some practice queries to become familiar with data","text":"","user":"admin","dateUpdated":"2019-06-06T13:02:16+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"title":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{}},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1559825907087_132080414","id":"20181018-110639_553156023","dateCreated":"2019-06-06T12:58:27+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5459"},{"text":"%md\nWe are going to create two views in the movies database.\nViews\n-- A view to show all types that are movies and release year.\n-- A view to show movies that have been released after 2015. \n\n~~~\nCreate VIEW movie_year as\nSelect primaryTitle,startYear from movie_title where titletype=\"movie\";\n\nCreate VIEW title_releases as\nSelect primaryTitle,startYear from movie_title where startYear>2015;\n\n\n\n~~~\n\nBut first we need to drop the table if it already exists.","user":"admin","dateUpdated":"2019-06-06T12:58:27+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>We are going to create two views in the movies database.\n<br  />Views\n<br  />&ndash; A view to show all types that are movies and release year.\n<br  />&ndash; A view to show movies that have been released after 2015.</p>\n<pre><code>Create VIEW movie_year as\nSelect primaryTitle,startYear from movie_title where titletype=\"movie\";\n\nCreate VIEW title_releases as\nSelect primaryTitle,startYear from movie_title where startYear&gt;2015;\n</code></pre>\n<p>But first we need to drop the table if it already exists.</p>\n"}]},"apps":[],"jobName":"paragraph_1559825907087_-1830889703","id":"20181203-225219_1680906315","dateCreated":"2019-06-06T12:58:27+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5460"},{"title":"3 - Drop and Create the views","text":"\n","user":"admin","dateUpdated":"2019-06-06T13:02:35+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1559825907088_777495815","id":"20181204-010437_1605522409","dateCreated":"2019-06-06T12:58:27+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5461"},{"title":"4 - Query the new views. (Limit to 5)","text":"\n","user":"admin","dateUpdated":"2019-06-06T13:02:40+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1559825907088_1952595757","id":"20181203-230842_273863334","dateCreated":"2019-06-06T12:58:27+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5462"},{"text":"%md\n**We are going to create a materialized views in the movies database.**\nCreate Transactional Table\nMaterialized View\n-- Show all types that are movies and the release year.\n~~~\n%jdbc(hive_interactive)\nCreate table movie_title_transaction stored as orc as select * from movie_title;\n\nALTER TABLE movie_title_transaction SET TBLPROPERTIES ('transactional'='true');\n\nCREATE MATERIALIZED VIEW mv_movie_title\nAS  Select primaryTitle,startYear from movie_title_transaction where titletype=\"movie\";\n\nDESCRIBE FORMATTED movies.mv_movie_title;\n\nALTER MATERIALIZED VIEW movies.mv_movie_title REBUILD;\n\n\n~~~\n\nBut first we need to drop the table if it already exists.\n","user":"admin","dateUpdated":"2019-06-06T12:58:27+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p><strong>We are going to create a materialized views in the movies database.</strong>\n<br  />Create Transactional Table\n<br  />Materialized View\n<br  />&ndash; Show all types that are movies and the release year.</p>\n<pre><code>%jdbc(hive_interactive)\nCreate table movie_title_transaction stored as orc as select * from movie_title;\n\nALTER TABLE movie_title_transaction SET TBLPROPERTIES ('transactional'='true');\n\nCREATE MATERIALIZED VIEW mv_movie_title\nAS  Select primaryTitle,startYear from movie_title_transaction where titletype=\"movie\";\n\nDESCRIBE FORMATTED movies.mv_movie_title;\n\nALTER MATERIALIZED VIEW movies.mv_movie_title REBUILD;\n</code></pre>\n<p>But first we need to drop the table if it already exists.</p>\n"}]},"apps":[],"jobName":"paragraph_1559825907088_-1286388632","id":"20181204-000517_618949634","dateCreated":"2019-06-06T12:58:27+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5463"},{"title":"5 - Drop and create the transactional table","text":"","user":"admin","dateUpdated":"2019-06-06T13:02:43+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"editorHide":false,"title":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"stock_exchange":"string","stock_symbol":"string","stock_date":"string","stock_price_open":"string","stock_price_high":"string","stock_price_low":"string","stock_price_close":"string","stock_volume":"string","stock_price_adj_close":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1559825907088_-924669926","id":"20181126-095509_674195979","dateCreated":"2019-06-06T12:58:27+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5464"},{"title":"6 - Create a materialized view and describe the view","text":"","user":"admin","dateUpdated":"2019-06-06T13:02:45+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"editorHide":false,"title":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{}},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1559825907089_642493222","id":"20181126-095817_1749585937","dateCreated":"2019-06-06T12:58:27+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5465"},{"title":"7 - Execute a query on the materialized view","text":"","user":"admin","dateUpdated":"2019-06-06T13:02:50+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1559825907089_1460929488","id":"20181126-131410_2059805867","dateCreated":"2019-06-06T12:58:27+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5466"},{"title":"8 - Can you delete movie titles from the year 2000 and rebuild the materialized view?","text":"","user":"admin","dateUpdated":"2019-06-06T13:02:55+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1559825907089_-1068146162","id":"20181204-174133_1538786119","dateCreated":"2019-06-06T12:58:27+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5467"},{"text":"%md\nIn a new paragraph show the materialied views in the movies database using the command below:\n```console\n%jdbc(hive_interactive)\nshow materialized views in movies;\n```","user":"admin","dateUpdated":"2019-06-06T13:09:46+0000","config":{"tableHide":true,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":false,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>In a new paragraph show the materialied views in the movies database using the command below:</p>\n<pre><code class=\"console\">%jdbc(hive_interactive)\nshow materialized views in movies;\n</code></pre>\n"}]},"apps":[],"jobName":"paragraph_1559825907089_-2139208386","id":"20181201-193217_1030043204","dateCreated":"2019-06-06T12:58:27+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:5468","dateFinished":"2019-06-06T13:06:43+0000","dateStarted":"2019-06-06T13:06:43+0000"},{"text":"\n","user":"admin","dateUpdated":"2019-06-06T13:09:30+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"editorMode":"ace/mode/scala","title":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1559826263613_-1714427178","id":"20190606-130423_928225206","dateCreated":"2019-06-06T13:04:23+0000","status":"READY","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:10127","title":"9 - Show the materialied views in the movies database"},{"title":"10 - Drop the Materialized view","text":"\n","user":"admin","dateUpdated":"2019-06-06T13:05:25+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1559825907090_994924659","id":"20181204-174951_1453020842","dateCreated":"2019-06-06T12:58:27+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5469"},{"text":"%md\n**Tip:** You can create a materialized view and store the data in Druid, using the Druid storage Handler\n","user":"admin","dateUpdated":"2019-06-06T13:03:48+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p><strong>Tip:</strong> You can create a materialized view and store the data in Druid, using the Druid storage Handler</p>\n"}]},"apps":[],"jobName":"paragraph_1559825907090_1751585131","id":"20181204-174805_2117664245","dateCreated":"2019-06-06T12:58:27+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:5470","dateFinished":"2019-06-06T13:03:48+0000","dateStarted":"2019-06-06T13:03:48+0000"},{"text":"%md\n###Practice SQL","user":"admin","dateUpdated":"2019-06-06T13:03:18+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h3>Practice SQL</h3>\n"}]},"apps":[],"jobName":"paragraph_1559825907090_-1292807440","id":"20181204-001505_340371368","dateCreated":"2019-06-06T12:58:27+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:5471","dateFinished":"2019-06-06T13:03:18+0000","dateStarted":"2019-06-06T13:03:18+0000"},{"title":"11 - Create your own materialized view","text":"\n","user":"admin","dateUpdated":"2019-06-06T13:06:02+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1559825907090_1981899183","id":"20181204-001519_78494032","dateCreated":"2019-06-06T12:58:27+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5472"},{"text":"%md\n# Result\n**You have now:** You have now successfully created a Hive materialized view.\n\n---","user":"admin","dateUpdated":"2019-06-06T12:58:27+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>Result</h1>\n<p><strong>You have now:</strong> You have now successfully created a Hive materialized view.</p>\n<hr />\n"}]},"apps":[],"jobName":"paragraph_1559825907091_-2144140715","id":"20181126-133507_1472573213","dateCreated":"2019-06-06T12:58:27+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5473"},{"text":"%md\n# Solution\n---","user":"admin","dateUpdated":"2019-06-06T12:58:27+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>Solution</h1>\n<hr />\n"}]},"apps":[],"jobName":"paragraph_1559825907091_-690144121","id":"20181018-125200_1133281582","dateCreated":"2019-06-06T12:58:27+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5474"},{"title":"1 - Use movies database and describe tables","text":"%jdbc(hive_interactive)\nuse movies;\ndescribe movie_title;\ndescribe movie_crew;\ndescribe movie_crew_info;\ndescribe ratings;","user":"admin","dateUpdated":"2019-06-06T13:09:18+0000","config":{"tableHide":true,"editorSetting":{"language":"sql","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/sql","fontSize":9,"editorHide":false,"title":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"tab_name":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}},"2":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"col_name":"string","data_type":"string","comment":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}},"3":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"col_name":"string","data_type":"string","comment":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}},"4":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"col_name":"string","data_type":"string","comment":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1559825907091_-69540778","id":"20181018-110338_1899474794","dateCreated":"2019-06-06T12:58:27+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5475"},{"title":"2 - Do some practice queries to become familiar with data","text":"%jdbc(hive_interactive)\nSELECT * FROM movie_crew;\n","user":"admin","dateUpdated":"2019-06-06T13:09:04+0000","config":{"tableHide":true,"editorSetting":{"language":"sql","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/sql","fontSize":9,"editorHide":false,"title":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{}},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}},"1":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"col_name":"string","data_type":"string","comment":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>Execute queries on the table</p>\n"}]},"apps":[],"jobName":"paragraph_1559825907092_1395966153","id":"20181126-094450_1417148698","dateCreated":"2019-06-06T12:58:27+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5476"},{"title":"3 - Drop and Create the views ","text":"%jdbc(hive_interactive)\nDROP VIEW IF EXISTS movie_year;\nDROP VIEW IF EXISTS title_releases;\n\nCreate VIEW movie_year as\nSelect primaryTitle,startYear from movie_title where titletype=\"movie\";\n\nCreate VIEW title_releases as\nSelect primaryTitle,startYear from movie_title where startYear>2015;\n","user":"admin","dateUpdated":"2019-06-06T13:07:19+0000","config":{"tableHide":true,"editorSetting":{"language":"sql","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/sql","fontSize":9,"editorHide":false,"title":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"dc_comics_acid_insert.page_id":"string","dc_comics_acid_insert.name":"string","dc_comics_acid_insert.urlslug":"string","dc_comics_acid_insert.id":"string","dc_comics_acid_insert.align":"string","dc_comics_acid_insert.eye":"string","dc_comics_acid_insert.hair":"string","dc_comics_acid_insert.sex":"string","dc_comics_acid_insert.gsm":"string","dc_comics_acid_insert.alive":"string","dc_comics_acid_insert.appearances":"string","dc_comics_acid_insert.first_appearances":"string","dc_comics_acid_insert.year":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Query executed successfully. Affected rows : -1"},{"type":"TEXT","data":"Query executed successfully. Affected rows : -1"},{"type":"TEXT","data":"Query executed successfully. Affected rows : -1"},{"type":"TEXT","data":"Query executed successfully. Affected rows : -1"}]},"apps":[],"jobName":"paragraph_1559825907092_-663396880","id":"20181018-110637_1031040934","dateCreated":"2019-06-06T12:58:27+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5477"},{"title":"4 - Query the new views. (Limit to 5)","text":"%jdbc(hive_interactive)\nSelect * from movie_year limit 2;\nSelect * from title_releases limit 2;","user":"admin","dateUpdated":"2019-06-06T13:07:26+0000","config":{"tableHide":true,"editorSetting":{"language":"sql","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/sql","fontSize":9,"editorHide":false,"title":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"movie_year.primarytitle":"string","movie_year.startyear":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}},"1":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"title_releases.primarytitle":"string","title_releases.startyear":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"movie_year.primarytitle\tmovie_year.startyear\nMiss Jerry\t1894\nThe Corbett-Fitzsimmons Fight\t1897\n"},{"type":"TABLE","data":"title_releases.primarytitle\ttitle_releases.startyear\nNa Boca da Noite\t2016\nThe Other Side of the Wind\t2018\n"}]},"apps":[],"jobName":"paragraph_1559825907092_-563317689","id":"20181018-111736_1626489692","dateCreated":"2019-06-06T12:58:27+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5478"},{"title":"5 - Drop and create the transactional table","text":"%jdbc(hive_interactive)\nCreate table movie_title_transaction stored as orc as select * from movie_title;\nALTER TABLE movie_title_transaction SET TBLPROPERTIES ('transactional'='true');","user":"admin","dateUpdated":"2019-06-06T13:07:30+0000","config":{"tableHide":true,"editorSetting":{"language":"sql","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/sql","fontSize":9,"editorHide":false,"title":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{}},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Query executed successfully. Affected rows : -1"},{"type":"TEXT","data":"Query executed successfully. Affected rows : -1"}]},"apps":[],"jobName":"paragraph_1559825907092_-109299549","id":"20181018-110351_344629664","dateCreated":"2019-06-06T12:58:27+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5479"},{"title":"6 - Create a materialized view and describe the view","text":"%jdbc(hive_interactive)\nCREATE MATERIALIZED VIEW mv_movie_title\nAS  Select primaryTitle,startYear from movie_title_transaction where titletype=\"movie\";\nDESCRIBE FORMATTED movies.mv_movie_title;\n","user":"admin","dateUpdated":"2019-06-06T13:07:35+0000","config":{"tableHide":true,"editorSetting":{"language":"sql","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/sql","fontSize":9,"editorHide":false,"title":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"dc_comics_acid.page_id":"string","dc_comics_acid.name":"string","dc_comics_acid.urlslug":"string","dc_comics_acid.id":"string","dc_comics_acid.align":"string","dc_comics_acid.eye":"string","dc_comics_acid.hair":"string","dc_comics_acid.sex":"string","dc_comics_acid.gsm":"string","dc_comics_acid.alive":"string","dc_comics_acid.appearances":"string","dc_comics_acid.first_appearances":"string","dc_comics_acid.year":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}},"1":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"col_name":"string","data_type":"string","comment":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Query executed successfully. Affected rows : -1"},{"type":"TABLE","data":"col_name\tdata_type\tcomment\n# col_name\tdata_type\tcomment\nprimarytitle\tstring\t\nstartyear\tstring\t\n\tnull\tnull\n# Detailed Table Information\tnull\tnull\nDatabase:           \tmovies              \tnull\nOwnerType:          \tUSER                \tnull\nOwner:              \thive                \tnull\nCreateTime:         \tThu May 09 21:14:38 UTC 2019\tnull\nLastAccessTime:     \tUNKNOWN             \tnull\nRetention:          \t0                   \tnull\nLocation:           \thdfs://ip-172-30-10-211.us-west-2.compute.internal:8020/warehouse/tablespace/managed/hive/movies.db/mv_movie_title\tnull\nTable Type:         \tMATERIALIZED_VIEW   \tnull\nTable Parameters:\tnull\tnull\n\tCOLUMN_STATS_ACCURATE\t{\\\"BASIC_STATS\\\":\\\"true\\\"}\n\tbucketing_version   \t2                   \n\tnumFiles            \t1                   \n\tnumRows             \t504303              \n\trawDataSize         \t90962371            \n\ttotalSize           \t5697870             \n\ttransient_lastDdlTime\t1557436479          \n\tnull\tnull\n# Storage Information\tnull\tnull\nSerDe Library:      \torg.apache.hadoop.hive.ql.io.orc.OrcSerde\tnull\nInputFormat:        \torg.apache.hadoop.hive.ql.io.orc.OrcInputFormat\tnull\nOutputFormat:       \torg.apache.hadoop.hive.ql.io.orc.OrcOutputFormat\tnull\nCompressed:         \tNo                  \tnull\nNum Buckets:        \t-1                  \tnull\nBucket Columns:     \t[]                  \tnull\nSort Columns:       \t[]                  \tnull\n\tnull\tnull\n# Materialized View Information\tnull\tnull\nOriginal Query:     \tSelect primaryTitle,startYear from movie_title_transaction where titletype=\"movie\"\tnull\nExpanded Query:     \tSelect `movie_title_transaction`.`primarytitle`,`movie_title_transaction`.`startyear` from `movies`.`movie_title_transaction` where `movie_title_transaction`.`titletype`=\"movie\"\tnull\nRewrite Enabled:    \tYes                 \tnull\nOutdated for Rewriting:\tNo                  \tnull\n"}]},"apps":[],"jobName":"paragraph_1559825907093_-378263552","id":"20181018-112106_390244690","dateCreated":"2019-06-06T12:58:27+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5480"},{"title":"7 - Execute a query on the materialized view","text":"%jdbc(hive_interactive)\nSelect * from mv_movie_title Limit 2;","user":"admin","dateUpdated":"2019-06-06T13:07:43+0000","config":{"tableHide":true,"editorSetting":{"language":"sql","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/sql","fontSize":9,"editorHide":false,"title":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"mv_movie_title.primarytitle":"string","mv_movie_title.startyear":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}},"2":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"dc_comics_acid.page_id":"string","dc_comics_acid.name":"string","dc_comics_acid.urlslug":"string","dc_comics_acid.id":"string","dc_comics_acid.align":"string","dc_comics_acid.eye":"string","dc_comics_acid.hair":"string","dc_comics_acid.sex":"string","dc_comics_acid.gsm":"string","dc_comics_acid.alive":"string","dc_comics_acid.appearances":"string","dc_comics_acid.first_appearances":"string","dc_comics_acid.year":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"mv_movie_title.primarytitle\tmv_movie_title.startyear\nMiss Jerry\t1894\nThe Corbett-Fitzsimmons Fight\t1897\n"}]},"apps":[],"jobName":"paragraph_1559825907093_-525988131","id":"20181126-131556_320618379","dateCreated":"2019-06-06T12:58:27+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5481"},{"title":"8 - Can you delete movie titles from the year 2000 and rebuild the materialized view? ","text":"%jdbc(hive_interactive)\nDelete from mv_movie_title where startYear='2000'","user":"admin","dateUpdated":"2019-06-06T13:07:51+0000","config":{"tableHide":true,"editorSetting":{"language":"sql","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/sql","fontSize":9,"editorHide":false,"title":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{}},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"ERROR","msg":[{"type":"TEXT","data":"org.apache.hive.service.cli.HiveSQLException: Error while compiling statement: FAILED: SemanticException [Error 10402]: You cannot update or delete records in a view\n\tat org.apache.hive.jdbc.Utils.verifySuccess(Utils.java:300)\n\tat org.apache.hive.jdbc.Utils.verifySuccessWithInfo(Utils.java:286)\n\tat org.apache.hive.jdbc.HiveStatement.runAsyncOnServer(HiveStatement.java:324)\n\tat org.apache.hive.jdbc.HiveStatement.execute(HiveStatement.java:265)\n\tat org.apache.commons.dbcp2.DelegatingStatement.execute(DelegatingStatement.java:291)\n\tat org.apache.commons.dbcp2.DelegatingStatement.execute(DelegatingStatement.java:291)\n\tat org.apache.zeppelin.jdbc.JDBCInterpreter.executeSql(JDBCInterpreter.java:718)\n\tat org.apache.zeppelin.jdbc.JDBCInterpreter.interpret(JDBCInterpreter.java:801)\n\tat org.apache.zeppelin.interpreter.LazyOpenInterpreter.interpret(LazyOpenInterpreter.java:103)\n\tat org.apache.zeppelin.interpreter.remote.RemoteInterpreterServer$InterpretJob.jobRun(RemoteInterpreterServer.java:633)\n\tat org.apache.zeppelin.scheduler.Job.run(Job.java:188)\n\tat org.apache.zeppelin.scheduler.ParallelScheduler$JobRunner.run(ParallelScheduler.java:162)\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n\tat java.lang.Thread.run(Thread.java:745)\nCaused by: org.apache.hive.service.cli.HiveSQLException: Error while compiling statement: FAILED: SemanticException [Error 10402]: You cannot update or delete records in a view\n\tat org.apache.hive.service.cli.operation.Operation.toSQLException(Operation.java:335)\n\tat org.apache.hive.service.cli.operation.SQLOperation.prepare(SQLOperation.java:199)\n\tat org.apache.hive.service.cli.operation.SQLOperation.runInternal(SQLOperation.java:262)\n\tat org.apache.hive.service.cli.operation.Operation.run(Operation.java:247)\n\tat org.apache.hive.service.cli.session.HiveSessionImpl.executeStatementInternal(HiveSessionImpl.java:575)\n\tat org.apache.hive.service.cli.session.HiveSessionImpl.executeStatementAsync(HiveSessionImpl.java:561)\n\tat org.apache.hive.service.cli.CLIService.executeStatementAsync(CLIService.java:315)\n\tat org.apache.hive.service.cli.thrift.ThriftCLIService.ExecuteStatement(ThriftCLIService.java:566)\n\tat org.apache.hive.service.rpc.thrift.TCLIService$Processor$ExecuteStatement.getResult(TCLIService.java:1557)\n\tat org.apache.hive.service.rpc.thrift.TCLIService$Processor$ExecuteStatement.getResult(TCLIService.java:1542)\n\tat org.apache.thrift.ProcessFunction.process(ProcessFunction.java:39)\n\tat org.apache.thrift.TBaseProcessor.process(TBaseProcessor.java:39)\n\tat org.apache.hive.service.auth.TSetIpAddressProcessor.process(TSetIpAddressProcessor.java:56)\n\tat org.apache.thrift.server.TThreadPoolServer$WorkerProcess.run(TThreadPoolServer.java:286)\n\t... 3 more\nCaused by: java.lang.RuntimeException: org.apache.hadoop.hive.ql.parse.SemanticException:You cannot update or delete records in a view\n\tat org.apache.hadoop.hive.ql.parse.UpdateDeleteSemanticAnalyzer.validateTargetTable(UpdateDeleteSemanticAnalyzer.java:578)\n\tat org.apache.hadoop.hive.ql.parse.UpdateDeleteSemanticAnalyzer.reparseAndSuperAnalyze(UpdateDeleteSemanticAnalyzer.java:610)\n\tat org.apache.hadoop.hive.ql.parse.UpdateDeleteSemanticAnalyzer.analyzeDelete(UpdateDeleteSemanticAnalyzer.java:371)\n\tat org.apache.hadoop.hive.ql.parse.UpdateDeleteSemanticAnalyzer.analyzeInternal(UpdateDeleteSemanticAnalyzer.java:99)\n\tat org.apache.hadoop.hive.ql.parse.BaseSemanticAnalyzer.analyze(BaseSemanticAnalyzer.java:289)\n\tat org.apache.hadoop.hive.ql.Driver.compile(Driver.java:664)\n\tat org.apache.hadoop.hive.ql.Driver.compileInternal(Driver.java:1869)\n\tat org.apache.hadoop.hive.ql.Driver.compileAndRespond(Driver.java:1816)\n\tat org.apache.hadoop.hive.ql.Driver.compileAndRespond(Driver.java:1811)\n\tat org.apache.hadoop.hive.ql.reexec.ReExecDriver.compileAndRespond(ReExecDriver.java:126)\n\tat org.apache.hive.service.cli.operation.SQLOperation.prepare(SQLOperation.java:197)\n\t... 15 more\n"}]},"apps":[],"jobName":"paragraph_1559825907093_924326865","id":"20181018-125344_1620499029","dateCreated":"2019-06-06T12:58:27+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5482"},{"text":"%jdbc(hive_interactive)\nshow materialized views in movies;","user":"admin","dateUpdated":"2019-06-06T13:10:06+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"sql","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"editorMode":"ace/mode/sql","title":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1559826571044_-1208773880","id":"20190606-130931_283500075","dateCreated":"2019-06-06T13:09:31+0000","status":"READY","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:10258","title":"9 - Show the materialied views in the movies database"},{"title":"10 - Drop the Materialized view","text":"%jdbc(hive_interactive)\nDrop materialized view movies.mv_movie_title;","user":"admin","dateUpdated":"2019-06-06T13:08:10+0000","config":{"tableHide":true,"editorSetting":{"language":"sql","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/sql","fontSize":9,"editorHide":false,"title":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"compactionid":"string","dbname":"string","tabname":"string","partname":"string","type":"string","state":"string","workerid":"string","starttime":"string","duration":"string","hadoopjobid":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false},"multiBarChart":{"rotate":{"degree":"-45"},"xLabelStatus":"default"}},"commonSetting":{},"keys":[],"groups":[],"values":[]},"helium":{}}},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Query executed successfully. Affected rows : -1"}]},"apps":[],"jobName":"paragraph_1559825907094_-950775290","id":"20181018-125022_873188625","dateCreated":"2019-06-06T12:58:27+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5483"},{"text":"%md\nWe hope you've enjoyed this lab. Below are additional resources that you should find useful:\n\n1. [Hortonworks Apache Spark Tutorials](http://hortonworks.com/tutorials/#tuts-developers) are your natural next step where you can explore Spark in more depth.\n2. [Hortonworks Community Connection (HCC)](https://community.hortonworks.com/spaces/85/data-science.html?type=question) is a great resource for questions and answers on Spark, Data Analytics/Science, and many more Big Data topics.\n3. [Hortonworks Apache Spark Docs](https://docs.hortonworks.com/HDPDocuments/HDP3/HDP-3.0.1/spark-overview/content/analyzing_data_with_apache_spark.html) - official Spark documentation.\n4. [Hortonworks Apache Zeppelin Docs](https://docs.hortonworks.com/HDPDocuments/HDP3/HDP-3.0.1/zeppelin-overview/content/overview.html) - official Zeppelin documentation.\n","user":"admin","dateUpdated":"2019-06-06T12:58:27+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":10,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>We hope you've enjoyed this lab. Below are additional resources that you should find useful:</p>\n<ol>\n<li><a href=\"http://hortonworks.com/tutorials/#tuts-developers\">Hortonworks Apache Spark Tutorials</a> are your natural next step where you can explore Spark in more depth.</li>\n<li><a href=\"https://community.hortonworks.com/spaces/85/data-science.html?type=question\">Hortonworks Community Connection (HCC)</a> is a great resource for questions and answers on Spark, Data Analytics/Science, and many more Big Data topics.</li>\n<li><a href=\"https://docs.hortonworks.com/HDPDocuments/HDP3/HDP-3.0.1/spark-overview/content/analyzing_data_with_apache_spark.html\">Hortonworks Apache Spark Docs</a> - official Spark documentation.</li>\n<li><a href=\"https://docs.hortonworks.com/HDPDocuments/HDP3/HDP-3.0.1/zeppelin-overview/content/overview.html\">Hortonworks Apache Zeppelin Docs</a> - official Zeppelin documentation.</li>\n</ol>\n"}]},"apps":[],"jobName":"paragraph_1559825907094_641302197","id":"20181126-133017_244739700","dateCreated":"2019-06-06T12:58:27+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5484"},{"text":"%angular\n</br>\n<center>\n<a href=\"https://learn.hortonworks.com/\">\n  <img src=\"https://everpath-course-content.s3-accelerate.amazonaws.com/instructor%2Ftbroas_hortonworks_c_bsns5k%2Fpublic%2Flogo-training-1.1494860458677.png\" alt=\"Hortonworks University\" style=\"width:125px;height:125px;border:0;\" align=\"middle\">\n</a>\n</center>","user":"admin","dateUpdated":"2019-06-06T12:58:27+0000","config":{"tableHide":false,"editorSetting":{"language":"scala","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":2,"editorMode":"ace/mode/undefined","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"ANGULAR","data":"</br>\n<center>\n<a href=\"https://learn.hortonworks.com/\">\n  <img src=\"https://everpath-course-content.s3-accelerate.amazonaws.com/instructor%2Ftbroas_hortonworks_c_bsns5k%2Fpublic%2Flogo-training-1.1494860458677.png\" alt=\"Hortonworks University\" style=\"width:125px;height:125px;border:0;\" align=\"middle\">\n</a>\n</center>"}]},"apps":[],"jobName":"paragraph_1559825907095_403940157","id":"20181126-133854_534346231","dateCreated":"2019-06-06T12:58:27+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5485"}],"name":"Labs/MaterializedViews","id":"2EBSPME3C","noteParams":{},"noteForms":{},"angularObjects":{"md:shared_process":[],"angular:shared_process":[],"sh:shared_process":[],"jdbc:shared_process":[],"spark2:shared_process":[]},"config":{"isZeppelinNotebookCronEnable":false,"looknfeel":"default","personalizedMode":"false"},"info":{}}