{"paragraphs":[{"text":"%md\n# About\n**Objective:** Become familiar with using Spark MLlib to learn a Decision Tree on Hadoop\n**File locations:** spark-labs/weatherAUS.csv\n**Successful outcome:** A trained decision tree that predicts if it will rain tomorrow\n**Before you begin:**\n**Related lessons:** Supervised learning, Decision Tree\n\n---","user":"admin","dateUpdated":"2019-04-09T16:17:35+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false,"completionKey":"TAB"},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408553034_-1430501432","id":"20171105-200834_1116095891","dateCreated":"2019-01-25T10:29:13+0000","dateStarted":"2019-04-09T16:17:35+0000","dateFinished":"2019-04-09T16:17:35+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:115979"},{"text":"%md\n# Setup\n---","user":"admin","dateUpdated":"2019-04-09T16:17:35+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408553035_-1542532942","id":"20181114-164229_902436001","dateCreated":"2019-01-25T10:29:13+0000","dateStarted":"2019-04-09T16:17:36+0000","dateFinished":"2019-04-09T16:17:36+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:115980"},{"title":"Retrieve the data from internet and store it in HDFS","text":"%sh\n\nrm -f weatherAUS.csv\nwget -nc -P /home/zeppelin https://s3-us-west-1.amazonaws.com/sci-241/rattle-togaware-weather/weatherAUS.csv\nhdfs dfs -rm spark-labs/weatherAUS.csv\nhdfs dfs -put weatherAUS.csv spark-labs/","user":"admin","dateUpdated":"2019-04-09T16:17:36+0000","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408553036_1421907570","id":"20181121-092909_1324039313","dateCreated":"2019-01-25T10:29:13+0000","dateStarted":"2019-04-09T16:17:36+0000","dateFinished":"2019-04-09T16:17:43+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:115981"},{"title":"Import libraries","text":"%pyspark\n\nfrom pyspark.ml.classification import DecisionTreeClassifier\nfrom pyspark.ml.evaluation import MulticlassClassificationEvaluator as MCE","user":"admin","dateUpdated":"2019-04-09T16:17:43+0000","config":{"tableHide":false,"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408553037_-849502251","id":"20181114-164621_138379904","dateCreated":"2019-01-25T10:29:13+0000","dateStarted":"2019-04-09T16:17:43+0000","dateFinished":"2019-04-09T16:17:43+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:115982"},{"text":"%md\n# Lab\n---","user":"admin","dateUpdated":"2019-04-09T16:17:43+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408553037_-1081656237","id":"20181114-164844_1661453681","dateCreated":"2019-01-25T10:29:13+0000","dateStarted":"2019-04-09T16:17:43+0000","dateFinished":"2019-04-09T16:17:43+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:115983"},{"text":"%md\n## Load and inspect the data","user":"admin","dateUpdated":"2019-04-09T16:17:43+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408553037_-910124387","id":"20181120-105601_996869670","dateCreated":"2019-01-25T10:29:13+0000","dateStarted":"2019-04-09T16:17:43+0000","dateFinished":"2019-04-09T16:17:43+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:115984"},{"text":"%md\nFirst we need to load the data into a dataframe using the 'header' and 'inferSchema' options.","user":"admin","dateUpdated":"2019-04-09T16:17:43+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408553038_1068271846","id":"20181120-104302_1071736728","dateCreated":"2019-01-25T10:29:13+0000","dateStarted":"2019-04-09T16:17:43+0000","dateFinished":"2019-04-09T16:17:43+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:115985"},{"title":"1 - Load the data into a Spark DataFrame","text":"","user":"admin","dateUpdated":"2019-04-09T16:17:43+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionSupport":true,"completionKey":"TAB"},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408553038_-664521632","id":"20171105-200623_656362182","dateCreated":"2019-01-25T10:29:13+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:115986"},{"text":"%md\nWhen doing machine learning, it is important to look at the data you are working with\nUse z.show(data) to view the first 20 rows of your data","user":"admin","dateUpdated":"2019-04-09T16:17:44+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408553038_41272943","id":"20171105-201923_413365117","dateCreated":"2019-01-25T10:29:13+0000","dateStarted":"2019-04-09T16:17:44+0000","dateFinished":"2019-04-09T16:17:44+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:115987"},{"title":"2 - Inspect the data","text":"","user":"admin","dateUpdated":"2019-04-09T16:17:44+0000","config":{"tableHide":false,"editorSetting":{"language":"scala","editOnDblClick":false,"completionSupport":true,"completionKey":"TAB"},"colWidth":12,"editorMode":"ace/mode/scala","editorHide":false,"fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408553039_-216365101","id":"20171105-201709_849284875","dateCreated":"2019-01-25T10:29:13+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:115988"},{"text":"%md\n## Transform the DataFrame into one usable by Spark ML\n\nSpark contains many helper functions, like StringIndexer to convert categorical variables to numerical ones.\nWe will define a function process_data that does all this, and then assembles the data for us.","user":"admin","dateUpdated":"2019-04-09T16:17:44+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408553039_1094567117","id":"20171105-201449_1118165660","dateCreated":"2019-01-25T10:29:13+0000","dateStarted":"2019-04-09T16:17:44+0000","dateFinished":"2019-04-09T16:17:44+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:115989"},{"text":"%md\n\nCopy and paste the code below in the next paragraph\n~~~\ndef process_data(data):    \n    non_null = data.na.drop(how=\"any\")\n    indexer = StringIndexer(inputCol = 'WindGustDir',outputCol = 'WindGustDir_indexed')\n    indexed1 = indexer.fit(non_null).transform(non_null)\n    indexer = StringIndexer(inputCol = 'WindDir9am', outputCol = 'WindDir9am_indexed')\n    indexed2 = indexer.fit(indexed1).transform(indexed1)\n    indexer = StringIndexer(inputCol = 'WindDir3pm', outputCol = 'WindDir3pm_indexed')\n    indexed3 = indexer.fit(indexed2).transform(indexed2)\n    \n    indexed = indexed3.drop('WindGustDir','WindDir9am','WindDir3pm')\n    \n    feature_columns = list(filter(lambda x: 'Temp' in x or 'WindGust' in x or '9am' in x or '3pm' in x,indexed.columns))\n\n    assembler = VectorAssembler(inputCols=feature_columns, outputCol=\"features\")\n\n    # Transform the data into a form useable by SParkML\n    vectorized = assembler.transform(indexed)\n    indexer = StringIndexer(inputCol = \"RainTomorrow\", outputCol = 'label')\n    labeled  = indexer.fit(vectorized).transform(vectorized)\n    return labeled\n~~~\n\n","user":"admin","dateUpdated":"2019-04-09T16:17:44+0000","config":{"tableHide":true,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":false,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408553039_-346870559","id":"20181120-105834_455616424","dateCreated":"2019-01-25T10:29:13+0000","dateStarted":"2019-04-09T16:17:44+0000","dateFinished":"2019-04-09T16:17:44+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:115990"},{"title":"3 - Create the process_data function","text":"","user":"admin","dateUpdated":"2019-04-09T16:17:44+0000","config":{"tableHide":false,"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408553040_-2057276809","id":"20181120-105833_534068450","dateCreated":"2019-01-25T10:29:13+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:115991"},{"text":"%md\n\nIn the next cell, call process_data on the data we read in.","user":"admin","dateUpdated":"2019-04-09T16:17:44+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408553040_-1673262339","id":"20181121-095645_987622514","dateCreated":"2019-01-25T10:29:13+0000","dateStarted":"2019-04-09T16:17:44+0000","dateFinished":"2019-04-09T16:17:44+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:115992"},{"title":"4 - Call the process_data on our data","text":"","user":"admin","dateUpdated":"2019-04-09T16:17:44+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"title":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"id":"string","date":"string","price":"string","bedrooms":"string","bathrooms":"string","sqft_living":"string","sqft_lot":"string","floors":"string","waterfront":"string","view":"string","condition":"string","grade":"string","sqft_above":"string","sqft_basement":"string","yr_built":"string","yr_renovated":"string","zipcode":"string","lat":"string","long":"string","sqft_living15":"string","sqft_lot15":"string","features":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408553041_-1203854803","id":"20181120-112316_2086924427","dateCreated":"2019-01-25T10:29:13+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:115993"},{"title":"5 - Show the label and features columns","text":"","user":"admin","dateUpdated":"2019-04-09T16:17:44+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"editorHide":false,"title":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"label":"string","features":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408553041_-738943324","id":"20181121-103142_733725590","dateCreated":"2019-01-25T10:29:13+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:115994"},{"text":"%md\nThis is the data that we will feed to our machine learning algorithm.","user":"admin","dateUpdated":"2019-04-09T16:17:44+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408553041_-1308029037","id":"20181120-114756_1372220167","dateCreated":"2019-01-25T10:29:13+0000","dateStarted":"2019-04-09T16:17:44+0000","dateFinished":"2019-04-09T16:17:44+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:115995"},{"text":"%md\n## Train a model","user":"admin","dateUpdated":"2019-04-09T16:17:45+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408553042_726916733","id":"20181120-142217_940991033","dateCreated":"2019-01-25T10:29:13+0000","dateStarted":"2019-04-09T16:17:45+0000","dateFinished":"2019-04-09T16:17:45+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:115996"},{"text":"%md\nNext we need to split this data between a training and a testing set.\nWe will keep \n* 80% of the rows for training and save the other 20% for testing on and\n* use a seed of 228 that will help everyone in the class have similar results.","user":"admin","dateUpdated":"2019-04-09T16:17:45+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408553042_854749142","id":"20181120-142338_951640488","dateCreated":"2019-01-25T10:29:13+0000","dateStarted":"2019-04-09T16:17:45+0000","dateFinished":"2019-04-09T16:17:45+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:115997"},{"title":"6 - Split the data into training and test instances","text":"","user":"admin","dateUpdated":"2019-04-09T16:17:45+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408553043_1215188096","id":"20181120-142341_921909094","dateCreated":"2019-01-25T10:29:13+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:115998"},{"title":"7 - Create an object of the class DecisionTreeClassifier with the default parameters","text":"","user":"admin","dateUpdated":"2019-04-09T16:17:45+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408553043_1806211903","id":"20181120-145510_996717762","dateCreated":"2019-01-25T10:29:13+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:115999"},{"text":"%md\n\nNow we can train the model on the training data. This may take a few seconds to run.","user":"admin","dateUpdated":"2019-04-09T16:17:45+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408553043_-1326841809","id":"20181120-145714_1379348985","dateCreated":"2019-01-25T10:29:13+0000","dateStarted":"2019-04-09T16:17:45+0000","dateFinished":"2019-04-09T16:17:45+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:116000"},{"title":"8 - Train the model on the training data","text":"","user":"admin","dateUpdated":"2019-04-09T16:17:45+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408553043_477529144","id":"20181120-145719_1439294915","dateCreated":"2019-01-25T10:29:13+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:116001"},{"text":"%md\nType the following code in to print a text representation of the tree learned\n~~~\nprint(model.toDebugString)\n~~~","user":"admin","dateUpdated":"2019-04-09T16:17:45+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408553044_-112517906","id":"20181121-160848_1310248061","dateCreated":"2019-01-25T10:29:13+0000","dateStarted":"2019-04-09T16:17:45+0000","dateFinished":"2019-04-09T16:17:45+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:116002"},{"title":"9 - Inspect the tree learned","text":"","user":"admin","dateUpdated":"2019-04-09T16:17:45+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408553044_-1778270319","id":"20181121-160927_1016221331","dateCreated":"2019-01-25T10:29:13+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:116003"},{"text":"%md\nUse the trained model to make predictions on the test data by calling the 'transform' transformation of the model on the test data.\n","user":"admin","dateUpdated":"2019-04-09T16:17:45+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408553045_1943567299","id":"20181120-150049_1309747784","dateCreated":"2019-01-25T10:29:13+0000","dateStarted":"2019-04-09T16:17:46+0000","dateFinished":"2019-04-09T16:17:46+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:116004"},{"title":"10 - Use the model to make predictions","text":"","user":"admin","dateUpdated":"2019-04-09T16:17:46+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408553045_-243949279","id":"20181120-145938_1249353348","dateCreated":"2019-01-25T10:29:13+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:116005"},{"text":"%md\nThe last dataframe now has an extra prediction column\nWe can compare the prediction to the label of a few of the rows in the test set","user":"admin","dateUpdated":"2019-04-09T16:17:46+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408553046_-839432352","id":"20181120-150622_1935248893","dateCreated":"2019-01-25T10:29:13+0000","dateStarted":"2019-04-09T16:17:46+0000","dateFinished":"2019-04-09T16:17:46+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:116006"},{"title":"11 - Compare the labels and the predictions","text":"","user":"admin","dateUpdated":"2019-04-09T16:17:46+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"editorHide":false,"title":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"label":"string","prediction":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408553046_1059366006","id":"20181121-105040_90820119","dateCreated":"2019-01-25T10:29:13+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:116007"},{"text":"%md\nCreate an MulticlassClassificationEvaluator (MCE) object and print out the F1 measure\n~~~\nevaluator = MCE()\nprint(evaluator.evaluate(predictions))\n~~~\nYou should see a value of 0.8313370133971834.\n","user":"admin","dateUpdated":"2019-04-09T16:17:46+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408553046_1188537899","id":"20181121-110924_1701254416","dateCreated":"2019-01-25T10:29:13+0000","dateStarted":"2019-04-09T16:17:46+0000","dateFinished":"2019-04-09T16:17:46+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:116008"},{"title":"12 - Create an MCE object and print out the F1 measure","text":"\n","user":"admin","dateUpdated":"2019-04-09T16:17:46+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408553046_961523888","id":"20181121-111227_1423491342","dateCreated":"2019-01-25T10:29:13+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:116009"},{"text":"%md\n\nWe can use Zeppelin's built in features to visualize our labels and predictions.\n\n1. Visualize the predictions dataframe \n2. Use the pivot table feature \n3. Choose the scatter plot visualization\n4. Experiment charting different features against each other\n5. Use either the label or the prediction columns as the group variable\n","user":"admin","dateUpdated":"2019-04-09T16:17:46+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408553046_-556757033","id":"20181120-154217_542387411","dateCreated":"2019-01-25T10:29:13+0000","dateStarted":"2019-04-09T16:17:46+0000","dateFinished":"2019-04-09T16:17:46+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:116010"},{"title":"13 - Visualize the predictions","text":"","user":"admin","dateUpdated":"2019-04-09T16:17:46+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"editorHide":false,"title":true,"results":{"0":{"graph":{"mode":"scatterChart","height":300,"optionOpen":true,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"Date":"string","Location":"string","MinTemp":"string","MaxTemp":"string","Rainfall":"string","Evaporation":"string","Sunshine":"string","WindGustSpeed":"string","WindSpeed9am":"string","WindSpeed3pm":"string","Humidity9am":"string","Humidity3pm":"string","Pressure9am":"string","Pressure3pm":"string","Cloud9am":"string","Cloud3pm":"string","Temp9am":"string","Temp3pm":"string","RainToday":"string","RISK_MM":"string","RainTomorrow":"string","WindGustDir_indexed":"string","WindDir9am_indexed":"string","WindDir3pm_indexed":"string","features":"string","label":"string","group":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false},"scatterChart":{"xAxis":{"name":"Humidity9am","index":10,"aggr":"sum"},"group":{"name":"prediction","index":26,"aggr":"sum"},"yAxis":{"name":"WindGustSpeed","index":7,"aggr":"sum"}},"pieChart":{}},"keys":[{"name":"Humidity9am","index":10,"aggr":"sum"}],"groups":[{"name":"WindGustSpeed","index":7,"aggr":"sum"}],"values":[{"name":"prediction","index":26,"aggr":"sum"}]},"helium":{}}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408553046_-907889364","id":"20181121-112847_1076813012","dateCreated":"2019-01-25T10:29:13+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:116011"},{"title":"Bonus","text":"%md\nIf you have extra time, try to improve your model.\n* Combine the assembler and regressor into a Pipeline\n* Go back to step #3 in the notebook and change the columns included as features\n* What happens if we included the binary variable RainToday\n* After editing that cell, run the entire notebook again by hitting the play button at the top","user":"admin","dateUpdated":"2019-04-09T16:17:46+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408553046_1808369957","id":"20181120-152344_1404227962","dateCreated":"2019-01-25T10:29:13+0000","dateStarted":"2019-04-09T16:17:47+0000","dateFinished":"2019-04-09T16:17:47+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:116012"},{"text":"%md\n# Result\n**You have now:** You have now successfully trained a decision tree model for classification and evaluated it using the F1 score.\n\n---","user":"admin","dateUpdated":"2019-04-09T16:17:47+0000","config":{"tableHide":true,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":false,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408553047_2119952843","id":"20181119-142716_792318228","dateCreated":"2019-01-25T10:29:13+0000","dateStarted":"2019-04-09T16:17:47+0000","dateFinished":"2019-04-09T16:17:47+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:116013"},{"text":"%md\n# Solution\n---","user":"admin","dateUpdated":"2019-04-09T16:17:47+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408553047_1850064351","id":"20171113-155535_1769142099","dateCreated":"2019-01-25T10:29:13+0000","dateStarted":"2019-04-09T16:17:47+0000","dateFinished":"2019-04-09T16:17:47+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:116014"},{"title":"1 - Load the data into a Spark DataFrame","text":"%pyspark\n\ndata = spark.read.format('csv').option('header',True).option('inferSchema',True).option('nullValue',\"NA\").load('spark-labs/weatherAUS.csv')","user":"admin","dateUpdated":"2019-04-09T16:17:47+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionSupport":true,"completionKey":"TAB"},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"runtimeInfos":{"jobUrl":{"propertyName":"jobUrl","label":"SPARK JOB","tooltip":"View in Spark web UI","group":"spark","values":["http://ip-172-31-1-200.eu-central-1.compute.internal:4040/jobs/job?id=826","http://ip-172-31-1-200.eu-central-1.compute.internal:4040/jobs/job?id=827"],"interpreterSettingId":"spark2"}},"apps":[],"jobName":"paragraph_1548408553047_-640209725","id":"20181120-104552_1855149124","dateCreated":"2019-01-25T10:29:13+0000","dateStarted":"2019-04-09T16:17:47+0000","dateFinished":"2019-04-09T16:17:51+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:116015"},{"title":"2 - Inspect the data","text":"%pyspark\n\nz.show(data)","user":"admin","dateUpdated":"2019-04-09T16:17:51+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"title":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"Date":"string","Location":"string","MinTemp":"string","MaxTemp":"string","Rainfall":"string","Evaporation":"string","Sunshine":"string","WindGustDir":"string","WindGustSpeed":"string","WindDir9am":"string","WindDir3pm":"string","WindSpeed9am":"string","WindSpeed3pm":"string","Humidity9am":"string","Humidity3pm":"string","Pressure9am":"string","Pressure3pm":"string","Cloud9am":"string","Cloud3pm":"string","Temp9am":"string","Temp3pm":"string","RainToday":"string","RISK_MM":"string","RainTomorrow":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true},"settings":{"params":{},"forms":{}},"runtimeInfos":{"jobUrl":{"propertyName":"jobUrl","label":"SPARK JOB","tooltip":"View in Spark web UI","group":"spark","values":["http://ip-172-31-1-200.eu-central-1.compute.internal:4040/jobs/job?id=828"],"interpreterSettingId":"spark2"}},"apps":[],"jobName":"paragraph_1548408553047_-2068409479","id":"20181120-104909_658872","dateCreated":"2019-01-25T10:29:13+0000","dateStarted":"2019-04-09T16:17:51+0000","dateFinished":"2019-04-09T16:17:51+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:116016"},{"title":"3 - Create the process_data function","text":"%pyspark\n\ndef process_data(data):    \n    non_null = data.na.drop(how=\"any\")\n    indexer = StringIndexer(inputCol = 'WindGustDir',outputCol = 'WindGustDir_indexed')\n    indexed1 = indexer.fit(non_null).transform(non_null)\n    indexer = StringIndexer(inputCol = 'WindDir9am', outputCol = 'WindDir9am_indexed')\n    indexed2 = indexer.fit(indexed1).transform(indexed1)\n    indexer = StringIndexer(inputCol = 'WindDir3pm', outputCol = 'WindDir3pm_indexed')\n    indexed3 = indexer.fit(indexed2).transform(indexed2)\n    \n    indexed = indexed3.drop('WindGustDir','WindDir9am','WindDir3pm')\n    \n    feature_columns = list(filter(lambda x: 'Temp' in x or 'WindGust' in x or '9am' in x or '3pm' in x,indexed.columns))\n\n    assembler = VectorAssembler(inputCols=feature_columns, outputCol=\"features\")\n\n    # Transform the data into a form useable by SParkML\n    vectorized = assembler.transform(indexed)\n    indexer = StringIndexer(inputCol = \"RainTomorrow\", outputCol = 'label')\n    labeled  = indexer.fit(vectorized).transform(vectorized)\n    return labeled","user":"admin","dateUpdated":"2019-04-09T16:17:51+0000","config":{"tableHide":false,"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408553050_-796112245","id":"20181121-095946_1151543625","dateCreated":"2019-01-25T10:29:13+0000","dateStarted":"2019-04-09T16:17:51+0000","dateFinished":"2019-04-09T16:17:51+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:116017"},{"title":"4 - Call the process_data on our data","text":"%pyspark\n\ncleaned_data = process_data(data)","user":"admin","dateUpdated":"2019-04-09T16:17:51+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"editorHide":false,"title":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"id":"string","date":"string","price":"string","bedrooms":"string","bathrooms":"string","sqft_living":"string","sqft_lot":"string","floors":"string","waterfront":"string","view":"string","condition":"string","grade":"string","sqft_above":"string","sqft_basement":"string","yr_built":"string","yr_renovated":"string","zipcode":"string","lat":"string","long":"string","sqft_living15":"string","sqft_lot15":"string","features":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true},"settings":{"params":{},"forms":{}},"runtimeInfos":{"jobUrl":{"propertyName":"jobUrl","label":"SPARK JOB","tooltip":"View in Spark web UI","group":"spark","values":["http://ip-172-31-1-200.eu-central-1.compute.internal:4040/jobs/job?id=829","http://ip-172-31-1-200.eu-central-1.compute.internal:4040/jobs/job?id=830","http://ip-172-31-1-200.eu-central-1.compute.internal:4040/jobs/job?id=831","http://ip-172-31-1-200.eu-central-1.compute.internal:4040/jobs/job?id=832"],"interpreterSettingId":"spark2"}},"apps":[],"jobName":"paragraph_1548408553050_-400491849","id":"20181121-103252_98019230","dateCreated":"2019-01-25T10:29:13+0000","dateStarted":"2019-04-09T16:17:51+0000","dateFinished":"2019-04-09T16:17:59+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:116018"},{"title":"5 - Show the label and features columns","text":"%pyspark\n\nz.show(cleaned_data.select('label','features'))","user":"admin","dateUpdated":"2019-04-09T16:17:59+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"editorHide":false,"title":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"label":"string","features":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true},"settings":{"params":{},"forms":{}},"runtimeInfos":{"jobUrl":{"propertyName":"jobUrl","label":"SPARK JOB","tooltip":"View in Spark web UI","group":"spark","values":["http://ip-172-31-1-200.eu-central-1.compute.internal:4040/jobs/job?id=833"],"interpreterSettingId":"spark2"}},"apps":[],"jobName":"paragraph_1548408553050_356990239","id":"20181121-102959_839674579","dateCreated":"2019-01-25T10:29:13+0000","dateStarted":"2019-04-09T16:17:59+0000","dateFinished":"2019-04-09T16:18:00+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:116019"},{"title":"6 - Split the data into training and test instances","text":"%pyspark\n\ntrain , test = cleaned_data.randomSplit([0.8,0.2],seed=228)","user":"admin","dateUpdated":"2019-04-09T16:18:00+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408553051_480871399","id":"20181120-145305_563969576","dateCreated":"2019-01-25T10:29:13+0000","dateStarted":"2019-04-09T16:18:01+0000","dateFinished":"2019-04-09T16:18:01+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:116020"},{"title":"7 - Create an object of the class DecisionTreeClassifier with the default parameters","text":"%pyspark\n\nclassifier = DecisionTreeClassifier()","user":"admin","dateUpdated":"2019-04-09T16:18:01+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408553051_-3686032","id":"20181120-145610_873155213","dateCreated":"2019-01-25T10:29:13+0000","dateStarted":"2019-04-09T16:18:01+0000","dateFinished":"2019-04-09T16:18:01+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:116021"},{"title":"8 - Train the model on the training data","text":"%pyspark\n\nmodel = classifier.fit(train)","user":"admin","dateUpdated":"2019-04-09T16:18:01+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"runtimeInfos":{"jobUrl":{"propertyName":"jobUrl","label":"SPARK JOB","tooltip":"View in Spark web UI","group":"spark","values":["http://ip-172-31-1-200.eu-central-1.compute.internal:4040/jobs/job?id=834","http://ip-172-31-1-200.eu-central-1.compute.internal:4040/jobs/job?id=835","http://ip-172-31-1-200.eu-central-1.compute.internal:4040/jobs/job?id=836","http://ip-172-31-1-200.eu-central-1.compute.internal:4040/jobs/job?id=837","http://ip-172-31-1-200.eu-central-1.compute.internal:4040/jobs/job?id=838","http://ip-172-31-1-200.eu-central-1.compute.internal:4040/jobs/job?id=839","http://ip-172-31-1-200.eu-central-1.compute.internal:4040/jobs/job?id=840","http://ip-172-31-1-200.eu-central-1.compute.internal:4040/jobs/job?id=841"],"interpreterSettingId":"spark2"}},"apps":[],"jobName":"paragraph_1548408553051_1286789303","id":"20181120-145840_1388968573","dateCreated":"2019-01-25T10:29:13+0000","dateStarted":"2019-04-09T16:18:01+0000","dateFinished":"2019-04-09T16:18:11+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:116022"},{"title":"9 - Use the model to make predictions","text":"%pyspark\n\nprint(model.toDebugString)","user":"admin","dateUpdated":"2019-04-09T16:18:11+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408553052_1511660302","id":"20181121-161100_1029409691","dateCreated":"2019-01-25T10:29:13+0000","dateStarted":"2019-04-09T16:18:12+0000","dateFinished":"2019-04-09T16:18:12+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:116023"},{"title":"10 - Use the model to make predictions","text":"%pyspark\n\npredictions = model.transform(test)","user":"admin","dateUpdated":"2019-04-09T16:18:12+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408553052_-1597762939","id":"20181120-150448_728157481","dateCreated":"2019-01-25T10:29:13+0000","dateStarted":"2019-04-09T16:18:12+0000","dateFinished":"2019-04-09T16:18:12+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:116024"},{"title":"11 - Compare the labels and the predictions","text":"%pyspark\n\nz.show(predictions.select(['label','prediction']))","user":"admin","dateUpdated":"2019-04-09T16:18:12+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"title":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"label":"string","prediction":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true},"settings":{"params":{},"forms":{}},"runtimeInfos":{"jobUrl":{"propertyName":"jobUrl","label":"SPARK JOB","tooltip":"View in Spark web UI","group":"spark","values":["http://ip-172-31-1-200.eu-central-1.compute.internal:4040/jobs/job?id=842"],"interpreterSettingId":"spark2"}},"apps":[],"jobName":"paragraph_1548408553052_-480587672","id":"20181120-150644_1026223454","dateCreated":"2019-01-25T10:29:13+0000","dateStarted":"2019-04-09T16:18:13+0000","dateFinished":"2019-04-09T16:18:15+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:116025"},{"title":"12 - Create an MCE object and print out the F1 measure","text":"%pyspark\n\nevaluator = MCE()\nprint(evaluator.evaluate(predictions))\n","user":"admin","dateUpdated":"2019-04-09T16:18:15+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"runtimeInfos":{"jobUrl":{"propertyName":"jobUrl","label":"SPARK JOB","tooltip":"View in Spark web UI","group":"spark","values":["http://ip-172-31-1-200.eu-central-1.compute.internal:4040/jobs/job?id=843","http://ip-172-31-1-200.eu-central-1.compute.internal:4040/jobs/job?id=844","http://ip-172-31-1-200.eu-central-1.compute.internal:4040/jobs/job?id=845"],"interpreterSettingId":"spark2"}},"apps":[],"jobName":"paragraph_1548408553052_-956910223","id":"20181120-152222_1366950715","dateCreated":"2019-01-25T10:29:13+0000","dateStarted":"2019-04-09T16:18:15+0000","dateFinished":"2019-04-09T16:18:21+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:116026"},{"title":"13 - Visualize the predictions","text":"%pyspark\n\nz.show(predictions)","user":"admin","dateUpdated":"2019-04-09T16:18:21+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"title":true,"results":{"0":{"graph":{"mode":"scatterChart","height":300,"optionOpen":true,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"Date":"string","Location":"string","MinTemp":"string","MaxTemp":"string","Rainfall":"string","Evaporation":"string","Sunshine":"string","WindGustSpeed":"string","WindSpeed9am":"string","WindSpeed3pm":"string","Humidity9am":"string","Humidity3pm":"string","Pressure9am":"string","Pressure3pm":"string","Cloud9am":"string","Cloud3pm":"string","Temp9am":"string","Temp3pm":"string","RainToday":"string","RISK_MM":"string","RainTomorrow":"string","WindGustDir_indexed":"string","WindDir9am_indexed":"string","WindDir3pm_indexed":"string","features":"string","label":"string","group":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false},"scatterChart":{"xAxis":{"name":"Humidity9am","index":10,"aggr":"sum"},"group":{"name":"prediction","index":28,"aggr":"sum"},"yAxis":{"name":"WindGustSpeed","index":7,"aggr":"sum"}},"pieChart":{}},"keys":[{"name":"Humidity9am","index":10,"aggr":"sum"}],"groups":[{"name":"WindGustSpeed","index":7,"aggr":"sum"}],"values":[{"name":"prediction","index":26,"aggr":"sum"}]},"helium":{}}},"enabled":true},"settings":{"params":{},"forms":{}},"runtimeInfos":{"jobUrl":{"propertyName":"jobUrl","label":"SPARK JOB","tooltip":"View in Spark web UI","group":"spark","values":["http://ip-172-31-1-200.eu-central-1.compute.internal:4040/jobs/job?id=846"],"interpreterSettingId":"spark2"}},"apps":[],"jobName":"paragraph_1548408553052_1411147374","id":"20181120-155137_1636863754","dateCreated":"2019-01-25T10:29:13+0000","dateStarted":"2019-04-09T16:18:21+0000","dateFinished":"2019-04-09T16:18:23+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:116027"},{"title":"Additional resources","text":"%md\nWe hope you've enjoyed this lab. Below are additional resources that you should find useful:\n\n1. [Hortonworks Apache Spark Tutorials](http://hortonworks.com/tutorials/#tuts-developers) are your natural next step where you can explore Spark in more depth.\n2. [Hortonworks Community Connection (HCC)](https://community.hortonworks.com/spaces/85/data-science.html?type=question) is a great resource for questions and answers on Spark, Data Analytics/Science, and many more Big Data topics.\n3. [Hortonworks Apache Spark Docs](https://docs.hortonworks.com/HDPDocuments/HDP3/HDP-3.0.1/spark-overview/content/analyzing_data_with_apache_spark.html) - official Spark documentation.\n4. [Hortonworks Apache Zeppelin Docs](https://docs.hortonworks.com/HDPDocuments/HDP3/HDP-3.0.1/zeppelin-overview/content/overview.html) - official Zeppelin documentation.","user":"admin","dateUpdated":"2019-04-09T16:18:23+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":10,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408553056_102559524","id":"20181116-135131_93712280","dateCreated":"2019-01-25T10:29:13+0000","dateStarted":"2019-04-09T16:18:24+0000","dateFinished":"2019-04-09T16:18:24+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:116028"},{"text":"%angular\n</br>\n<center>\n<a href=\"https://learn.hortonworks.com/\">\n  <img src=\"https://everpath-course-content.s3-accelerate.amazonaws.com/instructor%2Ftbroas_hortonworks_c_bsns5k%2Fpublic%2Flogo-training-1.1494860458677.png\" alt=\"Hortonworks University\" style=\"width:125px;height:125px;border:0;\" align=\"middle\">\n</a>\n</center>","user":"admin","dateUpdated":"2019-04-09T16:18:24+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":2,"editorMode":"ace/mode/undefined","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408553056_674053132","id":"20181115-083751_61749794","dateCreated":"2019-01-25T10:29:13+0000","dateStarted":"2019-04-09T16:18:24+0000","dateFinished":"2019-04-09T16:18:24+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:116029"},{"text":"%angular\n","user":"admin","dateUpdated":"2019-04-09T16:18:24+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/undefined","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408553056_1955789290","id":"20181120-161222_1016896442","dateCreated":"2019-01-25T10:29:13+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:116030"}],"name":"Labs/DecisionTrees","id":"2E4JRG54A","noteParams":{},"noteForms":{},"angularObjects":{"md:shared_process":[],"python:shared_process":[],"angular:shared_process":[],"sh:shared_process":[],"spark2:shared_process":[]},"config":{"isZeppelinNotebookCronEnable":false,"looknfeel":"default","personalizedMode":"false"},"info":{}}